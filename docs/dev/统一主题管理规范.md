# çŸ¥ç§‹å·¥ä½œå¹³å° - ç»Ÿä¸€ä¸»é¢˜ç®¡ç†è§„èŒƒ

## ğŸ“‹ æ¦‚è¿°

æœ¬æ–‡æ¡£å®šä¹‰äº†æ•´ä¸ªé¡¹ç›®çš„ä¸»é¢˜ç®¡ç†è§„èŒƒï¼Œç¡®ä¿æ‰€æœ‰ç•Œé¢ç»„ä»¶åœ¨æµ…è‰²/æ·±è‰²ä¸»é¢˜åˆ‡æ¢æ—¶ä¿æŒä¸€è‡´çš„è§†è§‰æ•ˆæœã€‚

## ğŸ¨ ä¸»é¢˜ç®¡ç†æ¶æ„

### 1. å…¨å±€é…ç½® (`config.py`)

```python
from qfluentwidgets import Theme

# åˆ›å»ºå…¨å±€é…ç½®å¯¹è±¡
cfg = Config()
cfg.themeMode.value = Theme.LIGHT  # é»˜è®¤ä½¿ç”¨æµ…è‰²ä¸»é¢˜
```

**é‡è¦è§„èŒƒ**ï¼š
- âœ… é»˜è®¤ä½¿ç”¨ `Theme.LIGHT`ï¼ˆæµ…è‰²ä¸»é¢˜ï¼‰
- âŒ é¿å…ä½¿ç”¨ `Theme.AUTO`ï¼ˆå¯èƒ½å¯¼è‡´åˆå§‹åŒ–å¼‚å¸¸ï¼‰
- é€šè¿‡ `qconfig` ç›‘å¬ä¸»é¢˜å˜åŒ–

### 2. YOLOæ¨¡å—ä¸»é¢˜ç®¡ç† (`YOLO/yolo_theme.py`)

YOLOæ¨¡å—æœ‰ç‹¬ç«‹çš„ä¸»é¢˜æ ·å¼ç®¡ç†æ–‡ä»¶ï¼Œæä¾›ç»Ÿä¸€çš„æ ·å¼è·å–æ–¹æ³•ã€‚

#### æ ¸å¿ƒå‡½æ•°

```python
from qfluentwidgets import isDarkTheme, themeColor

# é¢œè‰²è·å–å‡½æ•°
get_background_color()        # ä¸»èƒŒæ™¯è‰²
get_card_background_color()   # å¡ç‰‡èƒŒæ™¯è‰²
get_border_color()            # è¾¹æ¡†é¢œè‰²
get_text_color()              # ä¸»æ–‡å­—é¢œè‰²
get_secondary_text_color()    # æ¬¡è¦æ–‡å­—é¢œè‰²
get_theme_color_alpha(alpha)  # ä¸»é¢˜è‰²ï¼ˆå¸¦é€æ˜åº¦ï¼‰

# æ ·å¼è·å–å‡½æ•°
get_frame_style()             # QFrameæ ·å¼
get_push_button_style()       # QPushButtonæ ·å¼
get_primary_button_style()    # PrimaryPushButtonæ ·å¼
get_combo_box_style()         # QComboBoxæ ·å¼
get_spin_box_style()          # QSpinBox/QDoubleSpinBoxæ ·å¼
get_label_style()             # QLabelæ ·å¼
get_text_edit_style()         # QTextEditæ ·å¼
get_progress_bar_style()      # QProgressBaræ ·å¼
get_list_widget_style()       # QListWidgetæ ·å¼
```

#### ä¸»é¢˜é€‚é…å·¥å…·

```python
# ä¸ºå•ä¸ªæ§ä»¶åº”ç”¨ä¸»é¢˜
apply_theme_to_widget(widget)

# ä¸ºæ•´ä¸ªé¡µé¢åº”ç”¨ä¸»é¢˜ï¼ˆéå†æ‰€æœ‰å­æ§ä»¶ï¼‰
apply_theme_to_page(page_widget)
```

## ğŸ”§ ä½¿ç”¨è§„èŒƒ

### 1. é¡µé¢çº§ä¸»é¢˜é€‚é…

#### æ ‡å‡†æ¨¡å¼

```python
from qfluentwidgets import qconfig

class MyPage(QWidget):
    def __init__(self, parent=None):
        super().__init__(parent)
        self.initUI()
        
        # ç›‘å¬ä¸»é¢˜å˜åŒ–
        qconfig.themeChangedFinished.connect(self._onThemeChanged)
        
        # åº”ç”¨åˆå§‹ä¸»é¢˜
        self._onThemeChanged()
    
    def _onThemeChanged(self):
        """ä¸»é¢˜å˜åŒ–æ—¶æ›´æ–°æ‰€æœ‰æ§ä»¶æ ·å¼"""
        # æ–¹æ¡ˆ1ï¼šä½¿ç”¨ç»Ÿä¸€å·¥å…·ï¼ˆæ¨èï¼‰
        from YOLO.yolo_theme import apply_theme_to_page
        apply_theme_to_page(self)
        
        # æ–¹æ¡ˆ2ï¼šæ‰‹åŠ¨æ›´æ–°ï¼ˆç²¾ç¡®æ§åˆ¶ï¼‰
        self.myFrame.setStyleSheet(get_frame_style())
        self.myButton.setStyleSheet(get_push_button_style())
        # ... å…¶ä»–æ§ä»¶
```

### 2. æ§ä»¶åˆå§‹åŒ–è§„èŒƒ

#### âœ… æ¨èæ–¹å¼

```python
from YOLO.yolo_theme import get_push_button_style, get_label_style

# åˆ›å»ºæ§ä»¶æ—¶ç›´æ¥åº”ç”¨ä¸»é¢˜æ ·å¼
self.myButton = QPushButton("æŒ‰é’®æ–‡æœ¬")
self.myButton.setStyleSheet(get_push_button_style())

self.myLabel = QLabel("æ ‡ç­¾æ–‡æœ¬")
self.myLabel.setStyleSheet(get_label_style())
```

#### âŒ é¿å…ç¡¬ç¼–ç 

```python
# âŒ ä¸è¦ç¡¬ç¼–ç é¢œè‰²
self.myLabel = QLabel("æ ‡ç­¾æ–‡æœ¬")
self.myLabel.setStyleSheet("color: #ffffff;")  # æ— æ³•å“åº”ä¸»é¢˜åˆ‡æ¢

# âœ… ä½¿ç”¨ä¸»é¢˜å‡½æ•°
self.myLabel.setStyleSheet(get_label_style())
```

### 3. YOLOæ¨¡å—ä¸“ç”¨è§„èŒƒ

#### å¯¼å…¥ä¸»é¢˜å‡½æ•°

```python
from .yolo_theme import (
    get_frame_style,
    get_push_button_style,
    get_combo_box_style,
    get_label_style,
    # ... æŒ‰éœ€å¯¼å…¥
)
```

#### é¡µé¢ä¸»é¢˜ç›‘å¬

```python
class YOLOCustomPage(QWidget):
    def __init__(self, parent=None):
        super().__init__(parent)
        self.init_ui()
        
        # ç›‘å¬ä¸»é¢˜å˜åŒ–
        qconfig.themeChangedFinished.connect(self._onThemeChanged)
    
    def _onThemeChanged(self):
        """ä¸»é¢˜åˆ‡æ¢æ—¶æ›´æ–°æ ·å¼"""
        # æ›´æ–°æ‰€æœ‰æ§ä»¶
        for btn in [self.btn1, self.btn2, self.btn3]:
            btn.setStyleSheet(get_push_button_style())
        
        for combo in [self.combo1, self.combo2]:
            combo.setStyleSheet(get_combo_box_style())
```

### 4. ä¸»ç•Œé¢ä¸»é¢˜é€‚é…

#### HomeInterface æ¨¡å¼

```python
class HomeInterface(ScrollArea):
    def hideEvent(self, a0):
        """é¡µé¢éšè—æ—¶æ¸…ç†èµ„æº"""
        if self.bannerCard:
            self.bannerCard.cleanup()
        super().hideEvent(a0)
    
    def showEvent(self, a0):
        """é¡µé¢æ˜¾ç¤ºæ—¶é‡å¯èµ„æº"""
        super().showEvent(a0)
        # é‡å¯å®šæ—¶å™¨ç­‰èµ„æº
```

## ğŸ“ é¢œè‰²è§„èŒƒ

### æµ…è‰²ä¸»é¢˜

| ç”¨é€” | é¢œè‰²å€¼ | è¯´æ˜ |
|-----|-------|------|
| ä¸»èƒŒæ™¯ | `#ffffff` | é¡µé¢ä¸»èƒŒæ™¯ |
| å¡ç‰‡èƒŒæ™¯ | `#f5f5f5` | Frameã€CardèƒŒæ™¯ |
| è¾¹æ¡† | `#e0e0e0` | è¾¹æ¡†å’Œåˆ†éš”çº¿ |
| ä¸»æ–‡å­— | `#000000` | æ ‡é¢˜ã€æ­£æ–‡ |
| æ¬¡è¦æ–‡å­— | `#606060` | æç¤ºã€è¯´æ˜æ–‡å­— |
| ä¸»é¢˜è‰² | `#0078d7` | å¼ºè°ƒã€é€‰ä¸­çŠ¶æ€ |

### æ·±è‰²ä¸»é¢˜

| ç”¨é€” | é¢œè‰²å€¼ | è¯´æ˜ |
|-----|-------|------|
| ä¸»èƒŒæ™¯ | `#1e1e1e` | é¡µé¢ä¸»èƒŒæ™¯ |
| å¡ç‰‡èƒŒæ™¯ | `#2d2d2d` | Frameã€CardèƒŒæ™¯ |
| è¾¹æ¡† | `#3d3d3d` | è¾¹æ¡†å’Œåˆ†éš”çº¿ |
| ä¸»æ–‡å­— | `#ffffff` | æ ‡é¢˜ã€æ­£æ–‡ |
| æ¬¡è¦æ–‡å­— | `#aaaaaa` | æç¤ºã€è¯´æ˜æ–‡å­— |
| ä¸»é¢˜è‰² | `#0078d7` | å¼ºè°ƒã€é€‰ä¸­çŠ¶æ€ |

## ğŸ› ï¸ å¸¸è§æ§ä»¶æ ·å¼ç¤ºä¾‹

### QPushButton æ™®é€šæŒ‰é’®

```python
self.myButton = QPushButton("æŒ‰é’®æ–‡æœ¬")
self.myButton.setStyleSheet(get_push_button_style())

# ç‰¹ç‚¹ï¼š
# - è‡ªåŠ¨å“åº”hoverã€pressedã€disabledçŠ¶æ€
# - è·Ÿéšä¸»é¢˜åˆ‡æ¢èƒŒæ™¯è‰²å’Œæ–‡å­—è‰²
# - åœ†è§’6pxï¼Œpadding 8px 16px
```

### PrimaryPushButton ä¸»è¦æŒ‰é’®

```python
from qfluentwidgets import PrimaryPushButton

self.primaryBtn = PrimaryPushButton("ç¡®å®š")
self.primaryBtn.setStyleSheet(get_primary_button_style())

# ç‰¹ç‚¹ï¼š
# - å§‹ç»ˆä½¿ç”¨ä¸»é¢˜è“è‰² (#0078d7)
# - ç™½è‰²æ–‡å­—
# - æ›´é†’ç›®çš„è§†è§‰æ•ˆæœ
```

### QComboBox ä¸‹æ‹‰æ¡†

```python
self.myCombo = QComboBox()
self.myCombo.setStyleSheet(get_combo_box_style())

# ç‰¹ç‚¹ï¼š
# - ä¸‹æ‹‰åˆ—è¡¨èƒŒæ™¯è‡ªåŠ¨é€‚é…ä¸»é¢˜
# - é€‰ä¸­é¡¹ä½¿ç”¨ä¸»é¢˜è‰²é«˜äº®
# - è¾¹æ¡†é¢œè‰²è·Ÿéšä¸»é¢˜
```

### QFrame å®¹å™¨

```python
self.containerFrame = QFrame()
self.containerFrame.setStyleSheet(get_frame_style())

# ç‰¹ç‚¹ï¼š
# - åœ†è§’8px
# - è‡ªåŠ¨é€‚é…å¡ç‰‡èƒŒæ™¯è‰²
# - 1pxè¾¹æ¡†ï¼Œé¢œè‰²è·Ÿéšä¸»é¢˜
```

## ğŸ“Š å®Œæ•´é¡µé¢ç¤ºä¾‹

```python
from PyQt6.QtWidgets import QWidget, QVBoxLayout, QHBoxLayout, QPushButton, QLabel, QComboBox
from qfluentwidgets import qconfig
from YOLO.yolo_theme import (
    get_frame_style, get_push_button_style, 
    get_combo_box_style, get_label_style
)

class CustomPage(QWidget):
    def __init__(self, parent=None):
        super().__init__(parent)
        self.initUI()
        
        # ç›‘å¬ä¸»é¢˜å˜åŒ–
        qconfig.themeChangedFinished.connect(self._onThemeChanged)
        
        # åº”ç”¨åˆå§‹ä¸»é¢˜
        self._onThemeChanged()
    
    def initUI(self):
        layout = QVBoxLayout(self)
        
        # æ ‡é¢˜
        self.titleLabel = QLabel("é¡µé¢æ ‡é¢˜")
        self.titleLabel.setStyleSheet("font-size: 18px; font-weight: bold;")
        layout.addWidget(self.titleLabel)
        
        # æ§åˆ¶åŒºåŸŸ
        controlLayout = QHBoxLayout()
        
        self.selectBtn = QPushButton("é€‰æ‹©æ–‡ä»¶")
        self.selectBtn.setStyleSheet(get_push_button_style())
        controlLayout.addWidget(self.selectBtn)
        
        self.typeCombo = QComboBox()
        self.typeCombo.addItems(["ç±»å‹1", "ç±»å‹2", "ç±»å‹3"])
        self.typeCombo.setStyleSheet(get_combo_box_style())
        controlLayout.addWidget(self.typeCombo)
        
        layout.addLayout(controlLayout)
    
    def _onThemeChanged(self):
        """ä¸»é¢˜å˜åŒ–æ—¶æ›´æ–°æ ·å¼"""
        self.titleLabel.setStyleSheet(f"font-size: 18px; font-weight: bold; {get_label_style()}")
        self.selectBtn.setStyleSheet(get_push_button_style())
        self.typeCombo.setStyleSheet(get_combo_box_style())
```

## âš ï¸ å¸¸è§é”™è¯¯

### 1. ç¡¬ç¼–ç é¢œè‰²

```python
# âŒ é”™è¯¯
label.setStyleSheet("color: #ffffff;")

# âœ… æ­£ç¡®
label.setStyleSheet(get_label_style())
```

### 2. å¿˜è®°ç›‘å¬ä¸»é¢˜å˜åŒ–

```python
# âŒ é”™è¯¯ - åªåœ¨åˆå§‹åŒ–æ—¶è®¾ç½®æ ·å¼
def __init__(self):
    self.button.setStyleSheet(get_push_button_style())

# âœ… æ­£ç¡® - ç›‘å¬ä¸»é¢˜å˜åŒ–å¹¶æ›´æ–°
def __init__(self):
    self.button.setStyleSheet(get_push_button_style())
    qconfig.themeChangedFinished.connect(self._onThemeChanged)

def _onThemeChanged(self):
    self.button.setStyleSheet(get_push_button_style())
```

### 3. æ··ç”¨ä¸åŒæ ·å¼ç³»ç»Ÿ

```python
# âŒ é”™è¯¯ - æ··ç”¨ç¡¬ç¼–ç å’Œä¸»é¢˜å‡½æ•°
self.label1.setStyleSheet("color: white;")  # ç¡¬ç¼–ç 
self.label2.setStyleSheet(get_label_style())  # ä¸»é¢˜å‡½æ•°

# âœ… æ­£ç¡® - ç»Ÿä¸€ä½¿ç”¨ä¸»é¢˜å‡½æ•°
self.label1.setStyleSheet(get_label_style())
self.label2.setStyleSheet(get_label_style())
```

## ğŸ”„ ä¸»é¢˜åˆ‡æ¢æµç¨‹

```mermaid
graph TB
    A[ç”¨æˆ·ç‚¹å‡»ä¸»é¢˜åˆ‡æ¢æŒ‰é’®] --> B[æ›´æ–°cfg.themeMode]
    B --> C[qconfigè§¦å‘themeChangedFinishedä¿¡å·]
    C --> D[æ‰€æœ‰ç›‘å¬çš„é¡µé¢æ”¶åˆ°ä¿¡å·]
    D --> E[è°ƒç”¨å„é¡µé¢çš„_onThemeChangedæ–¹æ³•]
    E --> F[æ›´æ–°æ‰€æœ‰æ§ä»¶æ ·å¼]
    F --> G[ç•Œé¢ç«‹å³å“åº”ä¸»é¢˜å˜åŒ–]
```

## ğŸ“ æ£€æŸ¥æ¸…å•

åœ¨æ·»åŠ æ–°é¡µé¢æˆ–ä¿®æ”¹ç°æœ‰é¡µé¢æ—¶ï¼Œè¯·ç¡®ä¿ï¼š

- [ ] æ‰€æœ‰æŒ‰é’®ä½¿ç”¨ `get_push_button_style()` æˆ– `get_primary_button_style()`
- [ ] æ‰€æœ‰ä¸‹æ‹‰æ¡†ä½¿ç”¨ `get_combo_box_style()`
- [ ] æ‰€æœ‰æ ‡ç­¾ä½¿ç”¨ `get_label_style()`
- [ ] æ‰€æœ‰å®¹å™¨Frameä½¿ç”¨ `get_frame_style()`
- [ ] é¡µé¢ç›‘å¬äº† `qconfig.themeChangedFinished` ä¿¡å·
- [ ] å®ç°äº† `_onThemeChanged()` æ–¹æ³•
- [ ] æ²¡æœ‰ç¡¬ç¼–ç ä»»ä½•é¢œè‰²å€¼
- [ ] æµ‹è¯•äº†æµ…è‰²å’Œæ·±è‰²ä¸»é¢˜çš„åˆ‡æ¢æ•ˆæœ

## ğŸš€ æ‰©å±•ä¸»é¢˜ç³»ç»Ÿ

### æ·»åŠ æ–°æ§ä»¶æ ·å¼

å¦‚éœ€ä¸ºæ–°ç±»å‹æ§ä»¶æ·»åŠ ä¸»é¢˜æ”¯æŒï¼Œåœ¨ `yolo_theme.py` ä¸­æ·»åŠ ï¼š

```python
def get_my_widget_style():
    """è·å–è‡ªå®šä¹‰æ§ä»¶æ ·å¼"""
    if isDarkTheme():
        return """
            MyWidget {
                background-color: #2d2d2d;
                color: #ffffff;
            }
        """
    else:
        return """
            MyWidget {
                background-color: #f5f5f5;
                color: #000000;
            }
        """
```

### ä½¿ç”¨ä¸»é¢˜è‰²

```python
from YOLO.yolo_theme import get_theme_color_alpha

# è·å–ä¸»é¢˜è‰²ï¼Œé€æ˜åº¦30%
theme_color = get_theme_color_alpha(30)

widget.setStyleSheet(f"""
    QWidget {{
        background-color: {theme_color};
    }}
""")
```

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [QFluentWidgets ä¸»é¢˜æ–‡æ¡£](https://qfluentwidgets.com/zh/pages/theme)
- [Qtæ ·å¼è¡¨å‚è€ƒ](https://doc.qt.io/qt-6/stylesheet-reference.html)
- [é¡¹ç›®é…ç½®è¯´æ˜](../../../config.py)

---

**ç»´æŠ¤è€…**: å¼€å‘å›¢é˜Ÿ  
**æœ€åæ›´æ–°**: 2025-10-24  
**ç‰ˆæœ¬**: 1.0
